(this.webpackJsonpPOC=this.webpackJsonpPOC||[]).push([[0],{116:function(e,t){},129:function(e,t,n){e.exports=n(164)},162:function(e,t,n){},163:function(e,t,n){},164:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),o=n(108),c=n.n(o),i=n(19),u=n(179),l=n(45),s=n(32),b=n(21),f=n(30),p=n(109),m=n(173),O=n(26),d=n(174);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var h=function(){function e(t,n){var r=this;Object(s.a)(this,e),this.blobStorage=t,this.blobState=n,this.deleteQueueInner$=new f.a,this.deletedItems$=this.deleteQueue$.pipe(Object(p.a)((function(e){return r.deleteFile(e)})),this.blobState.scanEntries()),this.deleteFile=function(e){return r.blobState.getStorageOptionsWithContainer().pipe(Object(m.a)((function(t){return r.blobStorage.deleteBlobItem(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{filename:e})).pipe(r.mapDeleteResponse(e,t),r.blobState.finaliseBlobChange(t.containerName))})))},this.mapDeleteResponse=function(e,t){return function(n){return n.pipe(Object(O.a)((function(){return{filename:e,containerName:t.containerName}})),Object(d.a)({filename:e,containerName:t.containerName}))}}}return Object(b.a)(e,[{key:"deleteQueue$",get:function(){return this.deleteQueueInner$.asObservable()}}]),Object(b.a)(e,[{key:"deleteItem",value:function(e){this.deleteQueueInner$.next(e)}}]),e}(),v=n(25);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var E=function(){function e(t,n){var r=this;Object(s.a)(this,e),this.blobStorage=t,this.blobState=n,this.downloadQueueInner$=new f.a,this.downloadedItems$=this.downloadQueue$.pipe(Object(p.a)((function(e){return r.downloadFile(e)})),this.blobState.scanEntries()),this.downloadFile=function(e){return r.blobState.getStorageOptionsWithContainer().pipe(Object(m.a)((function(t){return r.blobStorage.downloadBlobItem(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{filename:e})).pipe(r.getDownloadUrlFromResponse(),r.mapDownloadResponse(e,t))})))},this.mapDownloadResponse=function(e,t){return function(n){return n.pipe(Object(O.a)((function(n){return{filename:e,containerName:t.containerName,url:n}})),Object(d.a)({filename:e,containerName:t.containerName,url:""}))}},this.getDownloadUrlFromResponse=function(){return function(e){return e.pipe(Object(m.a)((function(e){return Object(v.a)(e.blobBody?e.blobBody:Promise.resolve({})).pipe(Object(O.a)((function(e){return window.URL.createObjectURL(e)})))})))}}}return Object(b.a)(e,[{key:"downloadQueue$",get:function(){return this.downloadQueueInner$.asObservable()}}]),Object(b.a)(e,[{key:"downloadItem",value:function(e){this.downloadQueueInner$.next(e)}}]),e}(),y=n(97),w=n(86),C=n(175),S=n(176),k=n(177);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(){function e(t,n){var r=this;Object(s.a)(this,e),this.sasGenerator=t,this.blobStorage=n,this.selectedContainerInner$=new y.a(""),this.containers$=this.getStorageOptions().pipe(Object(m.a)((function(e){return r.blobStorage.getContainers(e)}))),this.itemsInContainer$=this.selectedContainer$.pipe(Object(w.a)((function(e){return!!e})),Object(m.a)((function(e){return r.getStorageOptions().pipe(Object(m.a)((function(t){return r.blobStorage.listBlobsInContainer(I({},t,{containerName:e}))})))}))),this.finaliseBlobChange=function(e){return function(t){return t.pipe(Object(C.a)((function(){return r.selectedContainerInner$.value===e&&r.selectedContainerInner$.next(e)})))}},this.scanEntries=function(){return function(e){return e.pipe(Object(O.a)((function(e){return Object(l.a)({},"".concat(e.containerName,"-").concat(e.filename),e)})),Object(S.a)((function(e,t){return I({},e,{},t)}),{}),Object(O.a)((function(e){return Object.values(e)})))}}}return Object(b.a)(e,[{key:"selectedContainer$",get:function(){return this.selectedContainerInner$.asObservable()}}]),Object(b.a)(e,[{key:"getContainerItems",value:function(e){this.selectedContainerInner$.next(e)}},{key:"getStorageOptionsWithContainer",value:function(){return this.getStorageOptions().pipe(Object(k.a)(this.selectedContainer$),Object(O.a)((function(e){var t=Object(i.a)(e,2);return I({},t[0],{containerName:t[1]})})))}},{key:"getStorageOptions",value:function(){return this.sasGenerator.getSasToken()}}]),e}(),x=n(121),D=n(87),$=n.n(D),B=n(110),R=n(180),F=n(6),Q=n(178);function T(e){var t,n,r,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new U(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function U(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(U=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new U(e)}var L=function(){function e(){Object(s.a)(this,e),this.buildConnectionString=function(e){return"BlobEndpoint=".concat(e.storageUri,";")+"SharedAccessSignature=".concat(e.storageAccessToken)}}return Object(b.a)(e,[{key:"getContainers",value:function(e){var t=this.buildClient(e);return this.asyncToObservable(t.listContainers())}},{key:"listBlobsInContainer",value:function(e){var t=this.getContainerClient(e);return console.log(e),this.asyncToObservable(t.listBlobsFlat())}},{key:"downloadBlobItem",value:function(e){var t=this.getBlockBlobClient(e);return Object(v.a)(t.download())}},{key:"deleteBlobItem",value:function(e){var t=this.getBlockBlobClient(e);return Object(v.a)(t.delete())}},{key:"uploadToBlobStorage",value:function(e,t){var n=this.getBlockBlobClient(t);return this.uploadFile(n,e)}},{key:"getBlockBlobClient",value:function(e){return this.getContainerClient(e).getBlockBlobClient(e.filename)}},{key:"getContainerClient",value:function(e){return this.buildClient(e).getContainerClient(e.containerName)}},{key:"buildClient",value:function(e){return R.a.fromConnectionString(this.buildConnectionString(e))}},{key:"uploadFile",value:function(e,t){var n=this;return new F.a((function(r){e.uploadBrowserData(t,{onProgress:n.onProgress(r),blobHTTPHeaders:{blobContentType:t.type}}).then(n.onUploadComplete(r,t),n.onUploadError(r))})).pipe(Object(Q.a)())}},{key:"onUploadError",value:function(e){return function(t){return e.error(t)}}},{key:"onUploadComplete",value:function(e,t){return function(){e.next(t.size),e.complete()}}},{key:"onProgress",value:function(e){return function(t){return e.next(t.loadedBytes)}}},{key:"asyncToObservable",value:function(e){return new F.a((function(t){Object(B.a)($.a.mark((function n(){var r,a,o,c,i,u,l;return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,r=!0,a=!1,n.prev=3,c=T(e);case 5:return n.next=7,c.next();case 7:return i=n.sent,r=i.done,n.next=11,i.value;case 11:if(u=n.sent,r){n.next=20;break}if(l=u,!t.closed){n.next=16;break}return n.abrupt("return");case 16:t.next(l);case 17:r=!0,n.next=5;break;case 20:n.next=26;break;case 22:n.prev=22,n.t0=n.catch(3),a=!0,o=n.t0;case 26:if(n.prev=26,n.prev=27,r||null==c.return){n.next=31;break}return n.next=31,c.return();case 31:if(n.prev=31,!a){n.next=34;break}throw o;case 34:return n.finish(31);case 35:return n.finish(26);case 36:t.complete(),n.next=42;break;case 39:n.prev=39,n.t1=n.catch(0),t.error(n.t1);case 42:case"end":return n.stop()}}),n,null,[[0,39],[3,22,26,36],[27,,31,35]])})))()})).pipe(Object(S.a)((function(e,t){return[].concat(Object(x.a)(e),[t])}),[]),Object(d.a)([]))}}]),e}();function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var W=function(){function e(t,n){var r=this;Object(s.a)(this,e),this.blobStorage=t,this.blobState=n,this.uploadQueueInner$=new f.a,this.uploadedItems$=this.uploadQueue$.pipe(Object(p.a)((function(e){return r.uploadFile(e)})),this.blobState.scanEntries()),this.uploadFile=function(e){return r.blobState.getStorageOptionsWithContainer().pipe(Object(m.a)((function(t){return r.blobStorage.uploadToBlobStorage(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{filename:e.name+(new Date).getTime()})).pipe(r.mapUploadResponse(e,t),r.blobState.finaliseBlobChange(t.containerName))})))},this.mapUploadResponse=function(e,t){return function(n){return n.pipe(Object(O.a)((function(n){return{filename:e.name,containerName:t.containerName,progress:parseInt((n/e.size*100).toString(),10)}})),Object(d.a)({filename:e.name,containerName:t.containerName,progress:0}))}}}return Object(b.a)(e,[{key:"uploadQueue$",get:function(){return this.uploadQueueInner$.asObservable().pipe(Object(p.a)((function(e){return Object(v.a)(e)})))}}]),Object(b.a)(e,[{key:"uploadItems",value:function(e){this.uploadQueueInner$.next(e)}}]),e}(),A=n(120),J=function(){function e(){Object(s.a)(this,e)}return Object(b.a)(e,[{key:"getSasToken",value:function(){return A.Axios.get("https://testfunctiontokenreturn.azurewebsites.net/api/httptriggertoken").pipe(Object(O.a)((function(e){return e.data})))}}]),e}(),z=new L,M=new N(new J,z),G=new W(z,M),H=new E(z,M),_=new h(z,M),q=a.a.createContext(M),K=a.a.createContext(G),X=a.a.createContext(H),Y=a.a.createContext(_),Z=function(e){var t=Object(r.useContext)(q),n=Object(r.useState)([]),o=Object(i.a)(n,2),c=o[0],l=o[1],s=Object(r.useState)(!1),b=Object(i.a)(s,2),f=b[0],p=b[1],m=e.user;Object(r.useEffect)((function(){var e=t.containers$.pipe(Object(u.a)((function(e){return l(e)}))).subscribe();return function(){return e.unsubscribe()}}),[]),Object(r.useEffect)((function(){p("VENDOR"!==m)}),[m]);var O=function(e){t.getContainerItems(e)};return a.a.createElement("div",{className:"container-list"},a.a.createElement("h3",null,"Projects"),f?c.map((function(e,t){return a.a.createElement("div",{key:t},"upload"===e.name?a.a.createElement("button",{onClick:function(){return O(e.name)}},"Refresh Uploads"):a.a.createElement("div",null))})):a.a.createElement("div",null,"Welcome Supplier!",O("upload")))},ee=function(){var e=Object(r.useContext)(K),t=Object(r.useRef)(null);return a.a.createElement("div",{className:"input-file"},a.a.createElement("input",{style:{display:"none"},ref:t,type:"file",multiple:!0,onChange:function(t){return(n=t.target.files)&&e.uploadItems(n);var n}}),a.a.createElement("button",{onClick:function(){return t.current&&t.current.click()}},"Click here to Upload File"))},te=function(){var e=Object(r.useContext)(Y),t=Object(r.useState)([]),n=Object(i.a)(t,2),o=n[0],c=n[1];return Object(r.useEffect)((function(){var t=e.deletedItems$.pipe(Object(u.a)((function(e){return c(e)}))).subscribe();return function(){return t.unsubscribe()}}),[]),a.a.createElement("div",{className:"items-deleted"},a.a.createElement("h3",null,"Deletes"),o.map((function(e,t){return a.a.createElement("pre",{key:t},JSON.stringify(e,void 0,2))})))},ne=function(){var e=Object(r.useContext)(X),t=Object(r.useState)([]),n=Object(i.a)(t,2),o=n[0],c=n[1];return Object(r.useEffect)((function(){var t=e.downloadedItems$.pipe(Object(u.a)((function(e){return c(e)}))).subscribe();return function(){return t.unsubscribe()}}),[]),a.a.createElement("div",{className:"items-downloaded"},a.a.createElement("h3",null,"Downloads"),o.map((function(e,t){return a.a.createElement("div",{key:t},e.containerName,":",a.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.filename))})))},re=function(e){var t=Object(r.useContext)(q),n=Object(r.useContext)(X),o=Object(r.useContext)(Y),c=Object(r.useState)([]),l=Object(i.a)(c,2),s=l[0],b=l[1],f=e.user,p=Object(r.useState)(!1),m=Object(i.a)(p,2),O=m[0],d=m[1];Object(r.useEffect)((function(){d("VENDOR"!==f)}),[f]);return Object(r.useEffect)((function(){var e=t.itemsInContainer$.pipe(Object(u.a)((function(e){return b(e)}))).subscribe();return function(){return e.unsubscribe()}}),[]),a.a.createElement("div",{className:"items-list"},a.a.createElement("table",null,a.a.createElement("tr",null,a.a.createElement("th",null,"File Name"),a.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),a.a.createElement("th",null,"Content Length"),a.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),a.a.createElement("th",null,"Last Modified"),a.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),a.a.createElement("th",null,"Actions")),O?s.map((function(e,t){return a.a.createElement("tr",{key:t},a.a.createElement("td",null,e.name),a.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),a.a.createElement("td",null,a.a.createElement("span",null,e.properties.contentLength)),a.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),a.a.createElement("td",null,a.a.createElement("span",null,e.properties.lastModified.toISOString())),a.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),a.a.createElement("td",null,a.a.createElement("button",{onClick:function(){return n.downloadItem(e.name)}},"Download")),a.a.createElement("td",null,a.a.createElement("button",{onClick:function(){return o.deleteItem(e.name)}},"Delete")))})):a.a.createElement("div",null)))},ae=function(){var e=Object(r.useContext)(K),t=Object(r.useState)([]),n=Object(i.a)(t,2),o=n[0],c=n[1];return Object(r.useEffect)((function(){var t=e.uploadedItems$.pipe(Object(u.a)((function(e){return c(e)}))).subscribe();return function(){return t.unsubscribe()}}),[]),a.a.createElement("div",{className:"items-list"},a.a.createElement("h3",null,"Uploads"),a.a.createElement("table",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Filename"),a.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),a.a.createElement("th",null,"Storage Location"),a.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),a.a.createElement("th",null,"Progress Percentage")),o.map((function(e,t){return a.a.createElement("tr",null,a.a.createElement("td",null,JSON.stringify(e.filename,void 0,2).replace(/\"/g,"")),a.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),a.a.createElement("td",null,JSON.stringify(e.containerName,void 0,2).replace(/\"/g,"")),a.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),a.a.createElement("td",null,JSON.stringify(e.progress,void 0,2)),a.a.createElement("pre",{key:t}))}))))},oe=n(123),ce=function(e){var t=e.children,n=Object(oe.a)(e,["children"]),o=Object(r.useContext)(q),c=Object(r.useState)(""),l=Object(i.a)(c,2),s=l[0],b=l[1];return Object(r.useEffect)((function(){var e=o.selectedContainer$.pipe(Object(u.a)((function(e){return b(e)}))).subscribe();return function(){return e.unsubscribe()}}),[]),s?a.a.createElement("div",n,a.a.createElement("h2",null,"Container Files: ",s),t):a.a.createElement(a.a.Fragment,null)},ie=function(){return a.a.createElement("div",null)},ue=(n(162),function(){var e=Object(r.useState)({name:"VENDOR"}),t=Object(i.a)(e,2),n=t[0],o=t[1],c=a.a.createContext({name:n.name});return a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:"button-21",onClick:function(){"VENDOR"===n.name?(o({name:"FORVARSMATERIELL"}),console.log(n)):(o({name:"VENDOR"}),console.log(n))}},"VENDOR"===n.name?"SUPPLIER":n.name),a.a.createElement(ie,null),a.a.createElement("hr",null),a.a.createElement(c.Provider,{value:n},a.a.createElement(Z,{user:n.name})),a.a.createElement("hr",null),a.a.createElement(ce,{className:"container"},"VENDOR"!==n.name?a.a.createElement("div",null):a.a.createElement(ee,null),a.a.createElement(c.Provider,{value:n},"VENDOR"!==n.name?a.a.createElement(a.a.Fragment,null,a.a.createElement(re,{user:n.name}),a.a.createElement("div",{className:"item-details"},a.a.createElement(ne,null),a.a.createElement(te,null))):a.a.createElement("div",{className:"item-details-1"},a.a.createElement(ae,null)))))});n(163),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},89:function(e,t){},93:function(e,t){}},[[129,1,2]]]);
//# sourceMappingURL=main.8799a423.chunk.js.map